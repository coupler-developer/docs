# 코드 리뷰 정책

## 목적

코드 품질 향상 및 지식 공유를 통한 팀 전체의 역량 강화

## 적용 범위

- coupler-mobile-app
- coupler-api
- coupler-admin-web

## 코드 리뷰 원칙

### 1. 모든 코드는 리뷰를 거친다

- main, develop 브랜치로의 모든 병합은 PR을 통해 진행
- 최소 1명 이상의 승인 필요
- 본인의 코드는 본인이 승인할 수 없음

### 2. 리뷰 시간

- PR 생성 후 24시간 이내 1차 리뷰 완료 목표
- 긴급한 경우 슬랙/메신저로 리뷰 요청

### 3. 리뷰 범위

- 기능 구현의 정확성
- 코드 품질 및 가독성
- 테스트 코드 작성 여부
- 보안 취약점
- 성능 이슈

## PR 작성 가이드

### PR 제목

- 명확하고 간결하게 작성
- 예: `[Mobile] 사용자 로그인 기능 추가`

### PR 설명

```markdown
## 작업 내용

- 변경 사항 요약

## 변경 이유

- 왜 이 변경이 필요한지

## 테스트

- 어떻게 테스트했는지
- 테스트 결과

## 스크린샷 (UI 변경 시)

- 변경 전/후 스크린샷

## 체크리스트

- [ ] 테스트 코드 작성
- [ ] 문서 업데이트
- [ ] 자체 테스트 완료
- [ ] `.ts/.tsx` 변경 시 TypeScript 타입체크 통과 (`npx tsc --noEmit`)
```

## 리뷰어 가이드

### 리뷰 태도

- 건설적인 피드백 제공
- 명확한 근거와 함께 의견 제시
- 긍정적인 부분도 언급

### 리뷰 코멘트 종류

- **MUST**: 반드시 수정해야 할 사항
- **SHOULD**: 수정을 권장하는 사항
- **SUGGEST**: 제안 사항
- **QUESTION**: 질문

### 체크 포인트

- [ ] 요구사항을 정확히 구현했는가?
- [ ] 코드가 읽기 쉽고 이해하기 쉬운가?
- [ ] 중복 코드는 없는가?
- [ ] 일관성 있는 스펙/네이밍/데이터 흐름을 유지하는가?
- [ ] API 스펙 불일치를 숨기는 fallback/normalize/resolve가 없는가?
- [ ] API가 항상 내려주는 필드를 Optional(`?`)로 두지 않았는가?
- [ ] 스펙 위반/불가능한 상태를 "조용한 가드"로 숨기지 않고, 에러로 드러내는가?
- [ ] 확장성(향후 변경·확대)에 무리가 없는가?
- [ ] 에러 처리가 적절한가?
- [ ] 테스트 코드가 충분한가?
  - 중복/누락 시나리오(분기) 없는지
  - 함수명이 테스트 내용과 일치하는지
  - verbose한 문법 없는지
  - assertion이 실제로 의미있는 검증을 하는지
- [ ] 보안 취약점은 없는가?
- [ ] 성능 문제는 없는가?
- [ ] 기능 회귀 가능성이 있는 변경은 없는가?
- [ ] `.ts/.tsx` 변경에서 타입 단언(`as`)이 과도하지 않고, TypeScript 오류가 없는가?
- [ ] 코드 변경 시 관련 문서(FSM, API 스펙 등)도 함께 업데이트했는가?
- [ ] 문서 변경 시 기존 내용과 충돌하는 부분은 없는가?

### 리뷰 전제

- 배포 시 기존 버전은 동시 배포로 전부 교체된다.

## 작성자 가이드

### 리뷰 피드백 처리

- 모든 코멘트에 응답
- 수정 완료 후 재리뷰 요청
- 의견이 다른 경우 논의

### 병합 전 체크리스트

- [ ] 모든 리뷰 코멘트 해결
- [ ] 필요한 승인 획득
- [ ] CI/CD 통과
- [ ] 충돌 해결

## 예외 사항

### 핫픽스

- 긴급 버그 수정 시 사후 리뷰 가능
- 배포 후 빠른 시일 내 리뷰 진행

### 문서 수정

- 문서 간단 오타 수정은 간소화 리뷰 가능

## 참고 자료

- [Google Engineering Practices](https://google.github.io/eng-practices/review/)
- [Best practices for code review](https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/)
